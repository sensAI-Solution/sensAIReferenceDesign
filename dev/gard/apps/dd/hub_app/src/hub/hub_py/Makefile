#-----------------------------------------------------------------------------
# Copyright (c) 2025 Lattice Semiconductor Corporation
#
# SPDX-License-Identifier: UNLICENSED
#
#-----------------------------------------------------------------------------

#-----------------------------------------------------------------------------
# Makefile Identification
#-----------------------------------------------------------------------------
MKFILE	:= $(realpath $(lastword $(MAKEFILE_LIST)))

#-----------------------------------------------------------------------------
# Makefile for HUB Python wrapper and/or library
#-----------------------------------------------------------------------------
TGT_NAME  := $(notdir $(HUB_PY_DIR))

#-----------------------------------------------------------------------------
# Name of the module built by this Makefile
#-----------------------------------------------------------------------------
TGT_MODULE:= HUB_PY

#-----------------------------------------------------------------------------
# Build type override
#-----------------------------------------------------------------------------
# Uncomment for release build
# BUILD_TYPE=release

#-----------------------------------------------------------------------------
# target output dirs
#-----------------------------------------------------------------------------
TGT_OUTPUT_DIR:= $(OUTPUT_DIR)/$(TGT_NAME)

#-----------------------------------------------------------------------------
# Space separated defines for compiler call(s)
# Example: To add "-DMY_OPTION -DMY_OPTION2",
# 		   use "DEFINES += MY_OPTION1 MY_OPTION2"
# Note:    These defines will apply to all compiler invocations
#-----------------------------------------------------------------------------
DEFINES +=							    \
	$(TGT_MODULE)                       \

PY_TEST_FILE :=							\
	$(HUB_TESTS_DIR)/test.py			\

PY_FILE_PATH :=							\
	$(HUB_PY_DIR)/hub.py				\

#-----------------------------------------------------------------------------
# PY target
#-----------------------------------------------------------------------------
PY_TARGET:=$(TGT_OUTPUT_DIR)/$(PY_SRC)

#-----------------------------------------------------------------------------
# Phony targets
#-----------------------------------------------------------------------------
.PHONY: all build run_minimal_py clean package

#-----------------------------------------------------------------------------
# targets
#-----------------------------------------------------------------------------
all:

$(TGT_OUTPUT_DIR):
	$(MKDIR) $(TGT_OUTPUT_DIR)

package:
	$(COPY) $(HUB_PY_DIR) $(OUTPUT_DIR)

clean:
	$(RM) $(TGT_OUTPUT_DIR)
